<html><head>
    <style text="text/css">
    html, body {
        padding: 0; margin: 0;
    }
    #canvas {
        width: 2000px;
        height: 2000px;
        position: absolute;
        top: 0px;
        left: 0px;
    }
    #window {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    </style>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    </head>
    <body>
	<div id="windowc">    
    <div id="window">
    <canvas id="canvas" width="2000" height="2000" style="cursor: default; top: -12px; left: 0px;"></canvas>
    </div>
		 </div>


    
	<script>
		window.onload = function(){
            
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d', { alpha: false });
            var objs = [];
            var x = -10, y = 0;
            
            ctx.mozImageSmoothingEnabled = false;
            ctx.webkitImageSmoothingEnabled = false;
            ctx.msImageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            ctx.imageSmoothingEnabled = false;
            pixgen()
            function pixgen() {
            for (var i = 1; i<=39999; i++) {
                x = x + 10;
                if (i == ((y+10)/10)*200){y = y + 10; x = -10;}
                objs.push({
	            	'x': x,
	            	'y': y,	    	
                    'r': 50,
                    'g': 130,
                    'b': 184,
                    'id': i,
	            })	
		    ctx.fillStyle = "rgb("+50+","+130+","+184+")";
                ctx.fillRect(objs[i-1].x, objs[i-1].y, 10, 10);
            }console.log("i_generate_pix_wall" +" /*/ "+ objs[0].id)};

            var capture = false, cx = 0, cy = 0,canidraw=0;
            x = 0; y = 0;
	     canvas.addEventListener('mousedown', function (event) {
	            capture = true;
	            x = event.clientX;
	            y = event.clientY;
                canvas.style.cursor = 'grab';
        }, false);
        canvas.addEventListener('mouseup', function () {
	        capture = false;
	        canvas.style.cursor = 'default';
            if(canidraw == true){console.log("draw");draw()}
            canidraw = true;
        }, false);

        canvas.addEventListener('mousemove', function (event) {
	        if (capture) {
               
                if (false !=canidraw) {canidraw = false};
		        cx -= x - event.clientX, cy -= y - event.clientY;
	            canvas.style.top  = cy + 'px';
	            canvas.style.left = cx + 'px';
                x = event.clientX;
		        y = event.clientY;	
	        }
        }, false);
        function draw(){

            var dx, dy, idd;
            dx = event.clientX - cx;
            dy = event.clientY - cy;
            if (scale - 1 > 0){
            dx = dx + 1000 * (scale - 1);
            dy = dy + 1000 * (scale - 1);
            dx = dx / scale;
            dy = dy / scale;
            }
            console.log(dy + "/*/" + dx)
            dx = Math.trunc(dx / 10);
            dy = Math.trunc(dy / 10);
            console.log(dy + "/*/" + dx)
            idd = dx + dy * 200;
            ctx.fillStyle = "blue";
            var o = objs[idd];
            
            ctx.fillRect(o.x , o.y, 10, 10);
            console.log(o.id)
            console.log(ctx)
        }
    }
    </script>
      <script>
        function addOnWheel(elem, handler) {
          if (elem.addEventListener) {
            if ('onwheel' in document) {
              // IE9+, FF17+
              elem.addEventListener("wheel", handler);
            } else if ('onmousewheel' in document) {
              // устаревший вариант события
              elem.addEventListener("mousewheel", handler);
            } else {
              // 3.5 <= Firefox < 17, более старое событие DOMMouseScroll пропустим
              elem.addEventListener("MozMousePixelScroll", handler);
            }
          } else { // IE8-
            text.attachEvent("onmousewheel", handler);
          }
        }
    
        var scale = 1;
    
        addOnWheel(canvas, function(e) {
    
          var delta = e.deltaY || e.detail || e.wheelDelta;
    
          // отмасштабируем при помощи CSS
          if (delta > 0) scale += 1;
          else if(scale != 1) scale -= 1;
    
          canvas.style.transform = canvas.style.WebkitTransform = canvas.style.MsTransform = 'scale(' + scale + ')';
    
          // отменим прокрутку
          e.preventDefault();
        });
      </script>
    

</body></html>